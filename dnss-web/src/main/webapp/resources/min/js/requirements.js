var requirements={$:$("#warnings"),$$:$("#warnings li").first(),advancements:[$("#job-sp li[data-job=0]").ownText(),$("#job-sp li[data-job=1]").ownText(),$("#job-sp li[data-job=2]").ownText()],check:function(){var f=dnss.get_all_sp(),d=false;var c=dnss.current[dnss.ultimates[0]],a=dnss.current[dnss.ultimates[1]];for(id in dnss.current){var b=dnss.current[id];if(b==c||b==a){if(c.level>0&&a.level>0){var h=0,g=0;for(var e=0;e<c.requires.length;e++){if(dnss.current[c.requires[e].id].level<c.requires[e].level){h++}}for(var e=0;e<c.need_sp.length;e++){if(c.level&&f[e]<c.need_sp[e]){h++}}for(var e=0;e<a.requires.length;e++){if(dnss.current[a.requires[e].id].level<a.requires[e].level){g++}}for(var e=0;e<a.need_sp.length;e++){if(a.level&&f[e]<a.need_sp[e]){g++}}if((h&&!g)||(!h&&g)){continue}}}for(var e=0;e<b.requires.length;e++){if(b.level&&dnss.current[b.requires[e].id].level<b.requires[e].level){this.add_skill(b.nameid,dnss.current[b.requires[e].id].nameid,b.requires[e].level);d=true}else{this.remove_skill(b.nameid,dnss.current[b.requires[e].id].nameid,b.requires[e].level)}}for(var e=0;e<b.need_sp.length;e++){if(b.level&&f[e]<b.need_sp[e]){this.add_sp(b.nameid,e,b.need_sp[e]);d=true}else{this.remove_sp(b.nameid,e,b.need_sp[e])}}}if(d){this.$.show()}else{this.$.hide()}},add_skill:function(c,b,e){var d=fmt("warn-skill-$0-$1-$2",c,b,e);var a=$("#"+d);if(a.length){a.show()}else{$(document.createElement("li")).attr("id",d).addClass("skill-warning").html(fmt("&raquo; $0 requires $1 level $2",dnss.messages[c],dnss.messages[b],e)).insertAfter(this.$$)}},remove_skill:function(c,b,d){var a=$(fmt("#warn-skill-$0-$1-$2",c,b,d));if(a.length){a.hide()}},add_sp:function(c,a,d){var e=fmt("warn-sp-$0-$1-$2",c,a,d);var b=$("#"+e);if(b.length){b.show()}else{$(document.createElement("li")).attr("id",e).addClass("sp-warning").html(fmt("&raquo; $0 requires $1 to have $2 SP",dnss.messages[c],this.advancements[a],d)).appendTo(this.$)}},remove_sp:function(c,a,d){var b=$(fmt("#warn-sp-$0-$1-$2",c,a,d));if(b.length){b.hide()}}};